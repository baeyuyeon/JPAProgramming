## 1. ë‹¤ëŒ€ì¼
### ğŸ” ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥(N:1)
![](https://velog.velcdn.com/images/baeyuyeon/post/4a111512-7b34-4e66-9bf2-dc69847ea429/image.png)
íšŒì›ì€ Member.teamìœ¼ë¡œ íŒ€ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ, ë°˜ëŒ€ë¡œ íŒ€ì—ëŠ” íšŒì›ì„ ì°¸ì¡°í•˜ëŠ” í•„ë“œê°€ ì—†ë‹¤. ë”°ë¼ì„œ ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ì´ë‹¤.
```java
@ManyToOne
@JoinColumn(name = "TEAM_ID")
private Team team;
```

`@JoinColumn(name = "TEAM_ID")` ì„ í†µí•´ TEAM_ID ì™¸ë˜í‚¤ì™€ ë§¤í•‘í•˜ì˜€ë‹¤.

### ğŸ” ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥(N:1)
![](https://velog.velcdn.com/images/baeyuyeon/post/f9d45603-6bd8-406e-8c33-d2d19b0d3063/image.png)
- ê°ì²´ ì—°ê´€ê´€ê³„ì—ì„œ ì‹¤ì„ ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ê³  ì ì„ ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë‹¤.
- ì–‘ë°©í–¥ ê´€ê³„ì—ì„œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ í•­ìƒ ë‹¤ìª½ì´ë‹¤.(ì™¸ë˜í‚¤ë¥¼ ê°–ê³ ìˆëŠ” ìª½)
- ì£¼ì¸ì´ ì•„ë‹Œ Team.members ëŠ” ì¡°íšŒë¥¼ ìœ„í•œ JPQLì´ë‚˜ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ì„ í•  ë•Œ ì‚¬ìš©í•œë‹¤.

## 2. ì¼ëŒ€ë‹¤
### ğŸ” ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥(1:N)
- ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ê´€ê³„ëŠ” JPA 2.0ë¶€í„° ì§€ì›í•œë‹¤.

![](https://velog.velcdn.com/images/baeyuyeon/post/6bb7f595-7108-402a-9619-1186f7e9061f/image.png)
- íŒ€ ì—”í‹°í‹°ì—ì„œë§Œ Memberë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¸ì¡°í•„ë“œê°€ ìˆë‹¤.
```java
@OneToMany
@JoinColumn(name= "TEAM_ID") // MEMBER í…Œì´ë¸”ì˜ TEAM_ID
private List<Member> members = new ArrayList<Member>();
```
ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ê´€ê³„ë¥¼ ë§¤í•‘í•  ë•ŒëŠ” @JoinColumn ì„ ëª…ì‹œí•´ì•¼í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ JPAëŠ” ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¡°ì¸í…Œì´ë¸” ì „ëµì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ ë§¤í•‘í•œë‹¤.

**ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë§¤í•‘ì˜ ë‹¨ì **
ë‹¨ì ì€, ë§¤í•‘í•œ ê°ì²´ê°€ ê´€ë¦¬í•˜ëŠ” ì™¸ë˜í‚¤ê°€ ë‹¤ë¥¸ í…Œì´ë¸”ì— ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ ë˜ë©´, INSERT í•  ë•Œ ì—°ê´€ê´€ê³„ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ UPDATE ë¬¸ì„ ì¶”ê°€ë¡œ ì‹¤í–‰í•´ì•¼í•œë‹¤.
```java
private static void testSave(EntityManager em) {


     Member member1 = new Member("member1", "íšŒì›1");
     Member member2 = new Member("member2", "íšŒì›2");

     Team team1 = new Team("team1", "íŒ€1");
     team1.getMembers().add(member1);
     team1.getMembers().add(member2);
     
     em.persist(member1); //INSERT member1
     em.persist(member2); //INSERT member2
     em.persist(team1);	//INSERT-team1, UPDATE-member1.fk
     					//UPDATE-member2.fk
}
```
**ê·¸ëŸ¬ë¯€ë¡œ ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë³´ë‹¤ëŠ” ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ì„ ì‚¬ìš©í•˜ì.**

### ğŸ” ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥(1:N,N:1)
ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥ ë§¤í•‘ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ì„ ì‚¬ìš©í•´ì•¼í•œë‹¤.

## 3. ì¼ëŒ€ì¼
ì¼ëŒ€ì¼ ê´€ê³„ëŠ” ì£¼ í…Œì´ë¸”ì´ë‚˜ ëŒ€ìƒ í…Œì´ë¸” ë‘˜ ì¤‘ ì–´ëŠê³³ì´ë‚˜ ì™¸ë˜í‚¤ë¥¼ ê°€ì§ˆ ìˆ˜ ì‡ë‹¤.

**ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤**
ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¥¼ ë‘ê³  ëŒ€ìƒí…Œì´ë¸”ì„ ì°¸ì¡°í•œë‹¤. ì™¸ë˜ í‚¤ë¥¼ ê°ì²´ ì°¸ì¡°ì™€ ë¹„ìŠ·í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ ê°ì²´ì§€í–¥ ê°œë°œìë“¤ì´ ì„ í˜¸í•œë‹¤.

**ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤**
ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ê°œë°œìë“¤ì´ì„ í˜¸í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¥ì ì€, í…Œì´ë¸” ê´€ê³„ë¥¼ ì¼ëŒ€ì¼ì—ì„œ ì¼ëŒ€ë‹¤ë¡œ ë³€ê²½í•  ë–„ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

### ğŸ” ì£¼ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤
#### ë‹¨ë°©í–¥
![](https://velog.velcdn.com/images/baeyuyeon/post/855e600e-c3db-4a0a-974c-25ee37928e49/image.png)

íšŒì›ê³¼ ì‚¬ë¬¼í•¨ì˜ ì¼ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„ë¥¼ ë‚˜íƒœë‚¸ ê·¸ë¦¼ì´ë‹¤. MEMBERê°€ ì£¼í…Œì´ë¸”ì´ê³  LOCKER ëŠ” ëŒ€ìƒ í…Œì´ë¸” ì´ë‹¤.

```java
@Entity
public class Member2 {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    private String username;

    @OneToOne
    @JoinColumn(name = "LOCKER_ID")
    private Locker locker;
	...
}
@Entity
public class Locker {

    @Id
    @GeneratedValue
    @Column(name = "LOCKER_ID")
    private Long id;

    private String name;
	...
}
```
ê°ì²´ ë§¤í•‘ì— @OneToOneì„ ì‚¬ìš©í–ˆê³ , ë°ì´í„°ë² ì´ìŠ¤ëŠ” LOCKER_ID ì™¸ë˜ í‚¤ì— ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì„ ì¶”ê°€í–ˆë‹¤.

#### ì–‘ë°©í–¥
![](https://velog.velcdn.com/images/baeyuyeon/post/0a4793cb-7296-487f-b0ad-9114a253e343/image.png)
```java
@Entity
public class Member2 {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    private String username;

    @OneToOne
    @JoinColumn(name = "LOCKER_ID")
    private Locker locker;
	...
}
@Entity
public class Locker {

   @Id
   @GeneratedValue
   @Column(name = "LOCKER_ID")
   private Long id;

   private String name;
   
   @OneToOne(mappedBy="locker")
   private Member member;
   
	...
}
```
Memberê°€ ì™¸ë˜í‚¤ë¥¼ ê°–ê³  ìˆìœ¼ë¯€ë¡œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤. ë”°ë¼ì„œ Lcoker.member ì— mappedBy ë¥¼ ì„ ì–¸í•´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë¼ê³  ì„¤ì •í–ˆë‹¤.

### ğŸ” ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤
#### ë‹¨ë°©í–¥
ì¼ëŒ€ì¼ ê´€ê³„ ì¤‘ ëŒ€ìƒí…Œì´ë¸”ì— ì™¸ë˜í‚¤ê°€ ìˆëŠ” ë‹¨ë°©í–¥ê´€ê³„ëŠ” JPAì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/92880690-4186-4601-980f-c16adb3d3556/image.png)
ê·¸ë¦¼ìœ¼ë¡œ ë´ë„ ë§¤í•‘í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ë‹¤.

#### ì–‘ë°©í–¥
![](https://velog.velcdn.com/images/baeyuyeon/post/ff2735d1-f956-45eb-962e-658909236894/image.png)
```java
@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    private String username;

    @OneToOne(mappedBy = "member")
    private Locker locker;
	...
}
@Entity
public class Locker {

   @Id
   @GeneratedValue
   @Column(name = "LOCKER_ID")
   private Long id;

   private String name;
   
   @OneToOne
   @JoinColumn(name="MEMBER_ID")
   private Member member;
	...
}
```
ì£¼ ì—”í‹°í‹°ì¸ Member ì—”í‹°í‹° ëŒ€ì‹ ì— ëŒ€ìƒ ì—”í‹°í‹°ì¸ Lockerë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ LOCKER í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•˜ë„ë¡ í–ˆë‹¤.

## 4. ë‹¤ëŒ€ë‹¤(N:N)
ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ 2ê°œì˜ í…Œì´ë¸”ë¡œ í‘œí˜„í•  ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ ì´ê²ƒì„ í’€ì–´ë‚´ëŠ” ì—°ê²°í…Œì´ë¸”ì„ ì‚¬ìš©í•œë‹¤.
ê°ì²´ëŠ” í…Œì´ë¸”ê³¼ ë‹¤ë¥´ê²Œ ê°ì²´ 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

**ê°ì²´ ì—°ê´€ê´€ê³„**
![](https://velog.velcdn.com/images/baeyuyeon/post/f9cfff04-026d-47fa-b8ab-869a66d486b6/image.png)
**í…Œì´ë¸” ì—°ê´€ê´€ê³„**
![](https://velog.velcdn.com/images/baeyuyeon/post/7a1fb108-e16a-4c6a-a5bf-c6aa46cb5fb0/image.png)

### ğŸ” N:N ë‹¨ë°©í–¥
íšŒì›ê³¼ ìƒí’ˆ ì—”í‹°í‹° ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
public class Member{
	@Id @Column(name = "MEMBER_ID")
    private String id;
    
    private String username;
    
    @ManyToMany
    @JoinTable(name = "MEMBER_PRODUCT"
    			, joinColumns = @JoinColumn(name="MEMBER_ID")
                , inverseJoinColumns = @JoinColumn(name="PRODUCT_ID""))
    private List<Product> products = new ArrayList<Product>();
    ...
}  

@Entity
public class Product{
	@Id @Column(name = "PRODUCT_ID")
    private String id;
    
    private String name;
    ...
}
```    
@JoinTableì„ í†µí•´ì„œ ì—°ê²° í…Œì´ë¸”ì„ ë°”ë¡œ ë§¤í•‘í•˜ì˜€ë‹¤.

**@JoinTable ì†ì„±**
- @JoinTable.name  : ì—°ê²°í…Œì´ë¸”ì„ ì§€ì •í•œë‹¤.
- @JoinTable.joinColumns : í˜„ì¬ ë°©í–¥ì¸ íšŒì›ê³¼ ë§¤í•‘í•  ì¡°ì¸ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§€ì •í•œë‹¤.
- @JoinTable.inverseJoinColumns : ë°˜ëŒ€ ë°©í–¥ì¸ ìƒí’ˆê³¼ ë§¤í•‘í•  ì¡°ì¸ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§€ì •í•œë‹¤.

#### ë‹¤ëŒ€ë‹¤ ë‹¨ë°©í–¥ ì €ì¥ ì²˜ë¦¬
```java
    public static void save(EntityManager em) {
        Product product = new Product();
        product.setName("ìƒí’ˆA");
        em.persist(product);

        Member4 member4 = new Member4();
        member4.setUsername("íšŒì›4");

        //1ë²ˆì§¸ ë°©ë²•
        member4.getProducts().add(product);
        
        em.persist(member4);
    }
```
ìœ„ ë¡œì§ì„ ì‹¤í–‰í•˜ë©´
```sql
INSERT INTO PRODUCT...
INSERT INTO MEMBER...
INSERT INTO MEMBER_PRODUCT...
```
ìœ„ ì¿¼ë¦¬ê°€ ì‹¤í–‰ëœë‹¤.
#### ë‹¤ëŒ€ë‹¤ ë‹¨ë°©í–¥ ì¡°íšŒ ì²˜ë¦¬
```java
	public static void find() {
        Member findMember = em.find(Member.class, memberId);
        
        //ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
        List<Product> findProducts = findMember.getProducts();
        for (Product item : findProducts) {
            System.out.println("itemName : " + item.getName());
        }
    }
```
member.getProducts()ë¥¼ í˜¸ì¶œí•´ì„œ ìƒí’ˆ ì´ë¦„ì„ ì¶œë ¥í•˜ë©´ ë‹¤ìŒ SQLì´ ì‹¤í–‰ëœë‹¤.
```sql
	select
        products0_.MEMBER_ID as MEMBER_I1_25_0_,
        products0_.PRODUCT_ID as PRODUCT_2_25_0_,
        product1_.PRODUCT_ID as PRODUCT_1_34_1_,
        product1_.name as name2_34_1_ 
    from
        MEMBER_PRODUCT products0_ 
    inner join
        Product product1_ 
            on products0_.PRODUCT_ID=product1_.PRODUCT_ID 
    where
        products0_.MEMBER_ID=?
        ```
```

### ğŸ” N:N ì–‘ë°©í–¥
N:N ì–‘ë°©í–¥ë„ ë§ˆì°¬ê°€ì§€ë¡œ @ManyToMany ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ê·¸ë¦¬ê³  ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ê³³ì— mappedBy ë¥¼ ì§€ì •í•œë‹¤.
ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
public class Member{
	@Id @Column(name = "MEMBER_ID")
    private String id;
    
    private String username;
    
    @ManyToMany
    @JoinTable(name = "MEMBER_PRODUCT"
    			, joinColumns = @JoinColumn(name="MEMBER_ID")
                , inverseJoinColumns = @JoinColumn(name="PRODUCT_ID""))
    private List<Product> products = new ArrayList<Product>();
    ...
}  

@Entity
public class Product{
	@Id @Column(name = "PRODUCT_ID")
    private String id;
    
    private String name;
    
    @ManyToMany(mappedBy = "products") // ì—­ë°©í–¥ ì¶”ê°€
    private List<Member> members;
    ...
}
```
Member í•„ë“œëŠ” ë°”ê¿€ê²Œ ì—†ê³ , Product.members ë¥¼ ì¶”ê°€í•˜ì—¬ ì–‘ë°©í–¥ ê´€ê³„ë¥¼ ì„¤ì •í•œë‹¤.
ê·¸ë¦¬ê³  í¸ì˜ë¥¼ ìœ„í•´ Memberì—”í‹°í‹°ì— ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•˜ì.
```java
public void addProduct(Product product)
	...
    products.add(product);
    product.getMembers().add(this);
}    
```

ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ì˜€ìœ¼ë¯€ë¡œ product.getMember()ë¥¼ ì‚¬ìš©í•´ì„œ ì—­ë°©í–¥ìœ¼ë¡œ ê°ì²´ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆë‹¤.
```java
public static void findInverse(EntityManager em) {
        Product product = em.find(Product.class, 1L);
        List<Member4> members = product.getMembers();
        for (Member4 entityMember : members) {
            System.out.println("entityMember = " + entityMember.getUsername());
        }
    }
```

### ğŸ” N:N ë§¤í•‘ì˜ í•œê³„ì™€ ê·¹ë³µ, ì—°ê²° ì—”í‹°í‹° ì‚¬ìš©
ìœ„ì—ì„œ ì‚¬ìš©í–ˆë˜ @ManyToMany ëŠ” ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ê¸°ì— í•œê³„ê°€ ìˆë‹¤. ì™œëƒí•˜ë©´, ë³´í†µì€ ì—°ê²°í…Œì´ë¸”ì— ì¶”ê°€ ì»¬ëŸ¼ì´ í•„ìš”í•˜ë‹¤.(ì˜ˆë¥¼ë“¤ì–´ì„œ, ì£¼ë¬¸ë‚ ì§œ/ì£¼ë¬¸ìˆ˜ëŸ‰ ê°™ì€ ê²ƒ...)
![](https://velog.velcdn.com/images/baeyuyeon/post/c463c30b-b999-47e7-b7e2-99ae5b32cd28/image.png)


ì—”í‹°í‹°ë¥¼ ìˆ˜ì •í•´ë³´ì.

**1. Member ì—”í‹°í‹° ìˆ˜ì •**
```java
@Entity
public class Member{
	@Id @Column(name = "MEMBER_ID")
    private String id;
    
    private String username;
    
    @OneToMany
    private List<MemberProduct> memberProducts;
    ...
}
```
ì´ì œ MemberëŠ” ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë‹¤.

**2. Product ì—”í‹°í‹° ìˆ˜ì •**
```java
@Entity
public class Product{
	@Id @Column(name = "PRODUCT_ID")
    private String id;
    
    private String name;
	...    
}
```
Product(ìƒí’ˆì½”ë“œ) ì—”í‹°í‹°ì—ì„œ íšŒì›ìƒí’ˆ ì—”í‹°í‹°ë¡œ ê°ì²´ê·¸ë˜í”„ íƒìƒ‰ì´ í•„ìš”í•˜ì§€ ì•Šì•„ ì—°ê´€ê´€ê³„ë¥¼ ë§Œë“¤ì§€ ì•Šì•˜ë‹¤.

**3. MemberProduct ì—”í‹°í‹° ì¶”ê°€**
```java
@Entity
@IdClass(MemberProductId.class)
public class MemberProduct {

    @Id
    @ManyToOne
    @JoinColumn(name = "MEMBER_ID")
    private Member member;

    @Id
    @ManyToOne
    @JoinColumn(name = "PRODUCT_ID")
    private Product product;

    private int orderAmount;

    ...
}

public class MemberProductId implements Serializable {

    private String member;
    private String product;
    
    //@Override equals, hashcode...
    ...
}
```
MemberProduct (íšŒì›ìƒí’ˆ)ì—”í‹°í‹°ë¥¼ ë³´ë©´ ê¸°ë³¸ í‚¤ë¥¼ ë§¤í•‘í•˜ëŠ” `@Id`ì™€ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•˜ëŠ” `@JoinColumn` ì„ ë™ì‹œì— ì‚¬ìš©í•´ì„œ **ê¸°ë³¸í‚¤+ì™¸ë˜í‚¤**ë¥¼ í•œë²ˆì— ë§¤í•‘í–ˆë‹¤.

#### ë³µí•© ê¸°ë³¸ í‚¤ 
JPAì—ì„œ ë³µí•©í‚¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë³„ë„ì˜ ì‹ë³„ì í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
ê·¸ë¦¬ê³  ì—”í‹°í‹°ì— `@IdClass` ë¥¼ ì‚¬ìš©í•´ì„œ ì‹ë³„ì í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ë©´ ëœë‹¤.
>**ë³µí•©í‚¤ë¥¼ ìœ„í•œ ì‹ë³„ì í´ë˜ìŠ¤ì˜ íŠ¹ì§•**
- ë³µí•© í‚¤ëŠ” ë³„ë„ì˜ ì‹ë³„ì í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì•¼í•œë‹¤.
- Seializableì„ êµ¬í˜„í•´ì•¼í•œë‹¤.
- equals ì™€ hashCode ë©”ì†Œë“œë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤.
- ê¸°ë³¸ ìƒì„±ìê°€ ìˆì–´ì•¼í•œë‹¤.
- ì‹ë³„ì í´ë˜ìŠ¤ëŠ” public ì´ì–´ì•¼í•œë‹¤.
- @IdClass ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• ì™¸ì— @EmbeddedIdë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.


#### ì‹ë³„ ê´€ê³„
ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ì„œ ìì‹ ì˜ ê¸°ë³¸í‚¤+ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì‹ë³„ê´€ê³„ë¼ê³  í•œë‹¤.
ìœ„ ì˜ˆì—ì„œëŠ” íšŒì›¡ìƒí’ˆì—ì„œ íšŒì›(ë¶€ëª¨)ì˜ ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ì„œ ìì‹ ì˜ ê¸°ë³¸í‚¤ë¡œ ì‚¬ìš©í•¨ê³¼ ë™ì‹œì— ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•œë‹¤. ìƒí’ˆí…Œì´ë¸”ê³¼ë„ ë§ˆì°¬ê°€ì§€ë‹¤.
ë”°ë¼ì„œ ì‹ë³„ê´€ê³„ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

#### ì €ì¥ ì½”ë“œ
```java
public static void save(EntityManager em) {
	// íšŒì› ì €ì¥
    Member643 member = new Member643();
    member.setId("member1");
    member.setUsername("íšŒì›1");
    em.persist(member);

    //ìƒí’ˆ ì €ì¥
    Product643 product = new Product643();
    product.setId("productA");
    product.setName("ìƒí’ˆA");
    em.persist(product);

    //íšŒì› ìƒí’ˆ ì €ì¥
    MemberProduct memberProduct = new MemberProduct();
    memberProduct.setMember(member);
    memberProduct.setProduct(product);
    memberProduct.setOrderAmount(10000);

    em.persist(memberProduct);
}
```
íšŒì›ìƒí’ˆ ì—”í‹°í‹°ëŠ” ì—°ê´€ëœ íšŒì›ì˜ ì‹ë³„ìì™€ ìƒí’ˆì˜ ì‹ë³„ìë¥¼ ê°€ì ¸ì™€ì„œ ìì‹ ì˜ ê¸°ë³¸í‚¤ ê°’ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

#### ì¡°íšŒì½”ë“œ
```java
public static void findByMemberProductId(EntityManager em) {
	// ê¸°ë³¸ í‚¤ ê°’ ìƒì„±
    MemberProductId memberProductId = new MemberProductId();
    memberProductId.setMember("member1");
    memberProductId.setProduct("productA");

    MemberProduct memberProduct = em.find(MemberProduct.class, memberProductId);

    Member643 member = memberProduct.getMember();
    Product643 product = memberProduct.getProduct();

    System.out.println("member = " + member.getUsername());
    System.out.println("product = " + product.getName());
    System.out.println("order amount = " + memberProduct.getOrderAmount());
}
```
ë³µí•©í‚¤ëŠ” í•­ìƒ ì‹ë³„ì í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ìƒì„±í•œ ì‹ë³„ì í´ë˜ìŠ¤ë¡œ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œë‹¤.
ì´ë ‡ê²Œ ë³µí•©í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ ë³µì¡í•˜ë‹¤.
ë³„ë„ì˜ ì‹ë³„ì í´ë˜ìŠ¤ìƒì„±ê³¼ @IdClass ë˜ëŠ” @EmbeddedIdë„ ì‚¬ìš©í•´ì•¼í•œë‹¤. ë˜í•œ equals, hashCode ë„ êµ¬í˜„í•´ì•¼í•œë‹¤.


### ğŸ” N:N ìƒˆë¡œìš´ ê¸°ë³¸í‚¤ ì‚¬ìš©
N:Nê´€ê³„ì—ì„œ ì¶”ì²œí•˜ëŠ” ê¸°ë³¸í‚¤ ìƒì„±ì „ëµì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” **ëŒ€ë¦¬í‚¤ë¥¼ Longê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ**ì´ë‹¤.
ì¥ì ì€? ì˜êµ¬íˆ ì“¸ ìˆ˜ ìˆìœ¼ë©°, ë¹„ì¦ˆë‹ˆìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/4d3108b1-ad11-4327-bcf5-3f51eb6c32ae/image.png)

í…Œì´ë¸” ëª…ì„ MEMBER_PRODUCT ì—ì„œ ORDERë¡œ ë³€ê²½í•˜ì˜€ë‹¤.
```java
@Entity
@Table(name = "Orders")
public class Order {

    @Id
    @GeneratedValue
    @Column(name = "ORDER_ID")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "MEMBER_ID")
    private Member644 member;

    @ManyToOne
    @JoinColumn(name = "PRODUCT_ID")
    private Product644 product;

    private int orderAmount;
    ...
}
```
ORDER_IDë¼ëŠ” ìƒˆë¡œìš´ ê¸°ë³¸í‚¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ê³  MEMBER_ID, PRODUCT_ID ëŠ” ì™¸ë˜í‚¤ë¡œë§Œ ì‚¬ìš©í•œë‹¤.

**ì €ì¥ì‹œì—ëŠ”?**

```java
	...
    Order order = new Order();
    order.setMember(member);
    order.setProduct(product);
    order.setOrderAmount(10000);

    em.persist(order);
```
**ì¡°íšŒì‹œì—ëŠ”?**
```java
	...
	Long orderId = 1L;

	Order order = em.find(Order.class, orderId);
    Member644 member = order.getMember();
	Product644 product = order.getProduct();

```
ì–¼ë§ˆë‚˜ ê°„ë‹¨í•œê°€! 
ì´ì²˜ëŸ¼ ìƒˆë¡œìš´ ê¸°ë³¸í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í’€ì–´ë‚´ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì´ë‹¤.

>ì‹ë³„ ê´€ê³„ : ë°›ì•„ì˜¨ ì‹ë³„ì ê¸°ë³¸í‚¤+ì™¸ë˜í‚¤
ë¹„ì‹ë³„ê´€ê³„ : ë°›ì•„ì˜¨ ì‹ë³„ìëŠ” ì™¸ë˜í‚¤ë¡œë§Œ ì‚¬ìš©í•˜ê³ , ìƒˆë¡œìš´ ì‹ë³„ìë¥¼ ì¶”ê°€í•œë‹¤.
