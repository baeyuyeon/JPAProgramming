## 1. ìƒì† ê´€ê³„ ë§¤í•‘
ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ê°ì²´ì§€í–¥ ì–¸ì–´ì—ì„œ ë‹¤ë£¨ëŠ” ìƒì†ì´ë¼ëŠ” ê°œë…ì´ ì—†ë‹¤. 
ORMì—ì„œ ë§í•˜ëŠ” ìƒì†ê´€ê³„ ë§¤í•‘ì€ ê°ì²´ì˜ ìƒì† êµ¬ì¡°ì™€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠˆí¼íƒ€ì…/ì„œë¸Œíƒ€ì… ê´€ê³„ë¥¼ ë§¤í•‘í•˜ëŠ” ê²ƒì´ë‹¤.
#### ë…¼ë¦¬ëª¨ë¸ì„ í…Œì´ë¸”ë¡œ êµ¬í˜„í•˜ëŠ” 3ê°€ì§€ ë°©ë²•
1) ê°ê°ì˜ í…Œì´ë¸”ë¡œ ë³€í™˜ : JPAì˜ ì¡°ì¸ì „ëµì„ ì‚¬ìš©í•˜ê¸°
2) í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜ : í…Œì´ë¸”ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì¼ í…Œì´ë¸” ì „ëµ
3) ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜ : ì„œë¸Œíƒ€ì… ë§ˆë‹¤ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë§Œë“œëŠ” ì „ëµ

### ğŸ“Œì¡°ì¸ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/b768c21a-5de7-4abb-857a-e4f8209e31b2/image.png)

ì¡°ì¸ì „ëµì€ ì—”í‹°í‹° ê°ê°ì„ ëª¨ë‘ í…Œì´ë¸”ë¡œ ë§Œë“¤ê³  ìì‹í…Œì´ë¸”ì´ ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ì„œ _ê¸°ë³¸í‚¤+ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ì „ëµ_ì´ë‹¤. íƒ€ì…ì„ êµ¬ë¶„í•˜ëŠ” ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼í•œë‹¤.

ë¶€ëª¨í…Œì´ë¸” ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item{
	
    @Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}
```

- `@Inheritance(strategy = InheritanceType.JOINED)` 
	 : ìƒì† ë§¤í•‘ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì— @Inheritance ë¥¼ ì‚¬ìš©í•œë‹¤. ë§¤í•‘ ì „ëµì„ JOINEDë¡œ ì‚¬ìš©í•œë‹¤.
- `@DiscriminatorColumn(name='DTYPE')` 
: ë¶€ëª¨ í´ë˜ìŠ¤ì— êµ¬ë¶„ ì»¬ëŸ¼ì„ ì§€ì •í•œë‹¤. ê¸°ë³¸ê°’ì´ DTYPEì´ë¼ @DiscriminatorColumnë§Œ ì¨ë„ ëœë‹¤.

ìì‹ í…Œì´ë¸” ì½”ë“œë¥¼ ë³´ì.

```java
@Entity
@DisciminatorValue("A")
public class Album extends Item{
	private String artist;
    ...
}
```
- `@DiscriminatorValue('M')` 
: ì—”í‹°í‹°ë¥¼ ì €ì¥í•  ë•Œ êµ¬ë¶„ ì»¬ëŸ¼ì— ì…ë ¥í•  ê°’ì„ ì§€ì •í•œë‹¤.

ë§Œì•½ ìì‹ í…Œì´ë¸”ì—ì„œ ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª…ì„ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´? `@PrimaryKeyJoinColumn`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```java
@Entity
@DisciminatorValue("A")
@PrimaryKeyJoinColumn(name="ALBUM_ID") //ID ì¬ì •ì˜
public class Album extends Item{
	private String artist;
    ...
}
```

#### ì¡°ì¸ ì „ëµì˜ ì¥ì 
- í…Œì´ë¸”ì´ ì •ê·œí™”ëœë‹¤.
- ì™¸ë˜í‚¤ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.
- ì €ì¥ê³µê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
#### ì¡°ì¸ ì „ëµì˜ ë‹¨ì 
- ì¡°íšŒí•  ë•Œ ì¡°ì¸ì´ ë§ì´ ì‚¬ìš©ë˜ë¯€ë¡œ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆë‹¤.
- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë³µì¡í•˜ë‹¤.
- ë°ì´í„° ë“±ë¡ì‹œ INSERT ê°€ ë‘ë²ˆ ì‹¤í–‰í•œë‹¤.

#### íŠ¹ì§•
JPA í‘œì¤€ ëª…ì„¸ëŠ” êµ¬ë¶„ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì§€ë§Œ, í•˜ì´ë²„ë„¤ì´íŠ¸ë¥¼ í¬í•¨í•œ ëª‡ëª‡ êµ¬í˜„ì²´ëŠ” êµ¬ë¶„ì»¬ëŸ¼ ì—†ì´ë„ ë™ì‘í•œë‹¤.

#### ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜
`@PrimaryKeyJoinColumn`, `@DiscriminatorColumn`, `@DisciminatorValue`


### ğŸ“Œë‹¨ì¼ í…Œì´ë¸” ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/8cabb64c-b575-4a02-a57b-cb4b8fa8cf14/image.png)

ë‹¨ì¼í…Œì´ë¸” ì „ëµì€ í…Œì´ë¸”ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•œë‹¤. ê·¸ë¦¬ê³  êµ¬ë¶„ ì»¬ëŸ¼ìœ¼ë¡œ ì–´ë–¤ ìì‹ ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ìˆëŠ”ì§€ êµ¬ë¶„í•œë‹¤.
ì¡°íšŒí•  ë•Œ ì¡°ì¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë¹ ë¥´ë‹¤.

ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item{
	@Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}

@Entity
@DisciminatorValue("A")
public class Album extends Item{
    ...
}
```
`@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¨ì¼ í…Œì´ë¸” ì „ëµì„ ì‚¬ìš©í•œë‹¤.

#### ë‹¨ì¼ í…Œì´ë¸” ì „ëµ ì¥ì 
- ì¡°ì¸ì´ í•„ìš”ì—†ìœ¼ë¯€ë¡œ ì¡°íšŒ ì„±ëŠ¥ì´ ë¹ ë¥´ë‹¤.
- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë‹¨ìˆœí•˜ë‹¤.
#### ë‹¨ì¼ í…Œì´ë¸” ì „ëµ ë‹¨ì 
- ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ nullì„ í—ˆìš©í•´ì•¼í•œë‹¤.
- ë‹¨ì¼ í…Œì´ë¸”ì— ëª¨ë“ ê²ƒì´ ì €ì¥ë˜ë¯€ë¡œ ìƒí™©ì— ë”°ë¼ì„œ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ì•ˆì¢‹ì„ ìˆ˜ ìˆë‹¤.
#### íŠ¹ì§•
- êµ¬ë¶„ ì»¬ëŸ¼ì„ ê¼­ ì‚¬ìš©í•´ì•¼í•œë‹¤.(`@DiscriminatorColumn`)
- `@DisciminatorValue`ë¥¼ ìƒëµí•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ ì—”í‹°í‹° ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.


### ğŸ“Œêµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/5d94ddca-0f8e-4a43-b8e4-9d7bf67b9e9d/image.png)
ìì‹ ì—”í‹°í‹° ë§ˆë‹¤ í…Œì´ë¸”ì„ ë§Œë“ ë‹¤.

ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Item{
	@Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}

@Entity
public class Album extends Item{
    ...
}
```
`@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)`ë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµì„ ì‚¬ìš©í•œë‹¤.** ì¼ë°˜ì ìœ¼ë¡œ ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ì „ëµì´ë‹¤.**

#### êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ì¥ì 
- ì„œë¸Œ íƒ€ì…ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬í•  ë•Œ íš¨ê³¼ì 
- NOT NULL ì œì•½ì¡°ê±´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ë‹¨ì 
- ì—¬ëŸ¬ ìì‹ í…Œì´ë¸”ì„ í•¨ê²Œ ì¡°íšŒí•  ë•Œ ì„±ëŠ¥ì´ ëŠë¦¬ë‹¤.(UNION ì‚¬ìš©)
#### íŠ¹ì§•
- êµ¬ë¶„ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
- í•´ë‹¹ ì „ëµì€ ì¶”ì²œí•˜ì§€ ì•Šê³  ì¡°ì¸ì´ë‚˜ ë‹¨ì¼ í…Œì´ë¸” ì „ëµì„ ê³ ë ¤í•˜ì.

---
## 2. @MappedSurperclass
ë¶€ëª¨ í´ë˜ìŠ¤ëŠ” í…Œì´ë¸”ê³¼ ë§¤í•‘í•˜ì§€ ì•Šê³  ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ìì‹ í´ë˜ìŠ¤ì—ê²Œ ë§¤í•‘ ì •ë³´ë§Œ ì œê³µí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
@MappedSurperClass ëŠ” ì‹¤ì œ í…Œì´ë¸”ê³¼ëŠ” ë§¤í•‘ë˜ì§€ ì•ŠëŠ”ë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/1ab8cdec-19ed-4a5d-8766-9e038e1caf83/image.png)
íšŒì›ê³¼ íŒë§¤ìëŠ” ì„œë¡œ ê´€ê³„ê°€ ì—†ëŠ” í…Œì´ë¸”ì´ë‹¤. id, name ë‘ ê³µí†µ ì†ì„±ë§Œ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ëª¨ì•„ì¤€ BaseEntity ë¥¼ ìƒì„±í•˜ì˜€ë‹¤.
ì½”ë“œë¥¼ ë³´ì.
```java
@MappedSuperclass
public class BaseEntity {

	@Id
    @GeneratedValue
    private Long id;
    private String name;
    ...
}
@Entity
public class Member7_2 extends BaseEntity {
	private String email;
}
...
```
`@MappedSuperClass` ë¥¼ ì‚¬ìš©í•´ì„œ í…Œì´ë¸”ê³¼ ë§¤í•‘í•  í•„ìš”ê°€ ì—†ê³  ìì‹ ì—”í‹°í‹°ì—ê²Œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë§¤í•‘ ì •ë³´ë§Œ ì œê³µí•˜ì˜€ë‹¤.

#### @MappedSuperclass íŠ¹ì§•
- @MappedSupeerclass ë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¯€ë¡œ em.find()ë‚˜ JPQLì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- ì´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë§Œë“œëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
- ë“±ë¡ì¼ì, ìˆ˜ì •ì¼ì, ë“±ë¡ì, ìˆ˜ì •ì ê°™ì€ ì—¬ëŸ¬ ì—”í‹°í‹°ì—ì„œ ê³µí†µ ì‚¬ìš©í•˜ëŠ” ì†ì„±ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
>ì°¸ê³ 
@Entity ëŠ” @Entity ì´ê±°ë‚˜ @MappedSuperclassë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ë°›ì„ ìˆ˜ ìˆë‹¤.
