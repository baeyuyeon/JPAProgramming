## 1. ìƒì† ê´€ê³„ ë§¤í•‘
ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ê°ì²´ì§€í–¥ ì–¸ì–´ì—ì„œ ë‹¤ë£¨ëŠ” ìƒì†ì´ë¼ëŠ” ê°œë…ì´ ì—†ë‹¤. 
ORMì—ì„œ ë§í•˜ëŠ” ìƒì†ê´€ê³„ ë§¤í•‘ì€ ê°ì²´ì˜ ìƒì† êµ¬ì¡°ì™€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠˆí¼íƒ€ì…/ì„œë¸Œíƒ€ì… ê´€ê³„ë¥¼ ë§¤í•‘í•˜ëŠ” ê²ƒì´ë‹¤.
#### ë…¼ë¦¬ëª¨ë¸ì„ í…Œì´ë¸”ë¡œ êµ¬í˜„í•˜ëŠ” 3ê°€ì§€ ë°©ë²•
1) ê°ê°ì˜ í…Œì´ë¸”ë¡œ ë³€í™˜ : JPAì˜ ì¡°ì¸ì „ëµì„ ì‚¬ìš©í•˜ê¸°
2) í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜ : í…Œì´ë¸”ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì¼ í…Œì´ë¸” ì „ëµ
3) ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜ : ì„œë¸Œíƒ€ì… ë§ˆë‹¤ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë§Œë“œëŠ” ì „ëµ

### ğŸ“Œì¡°ì¸ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/b768c21a-5de7-4abb-857a-e4f8209e31b2/image.png)

ì¡°ì¸ì „ëµì€ ì—”í‹°í‹° ê°ê°ì„ ëª¨ë‘ í…Œì´ë¸”ë¡œ ë§Œë“¤ê³  ìì‹í…Œì´ë¸”ì´ ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ì„œ _ê¸°ë³¸í‚¤+ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ì „ëµ_ì´ë‹¤. íƒ€ì…ì„ êµ¬ë¶„í•˜ëŠ” ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼í•œë‹¤.

ë¶€ëª¨í…Œì´ë¸” ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item{
	
    @Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}
```

- `@Inheritance(strategy = InheritanceType.JOINED)` 
	 : ìƒì† ë§¤í•‘ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì— @Inheritance ë¥¼ ì‚¬ìš©í•œë‹¤. ë§¤í•‘ ì „ëµì„ JOINEDë¡œ ì‚¬ìš©í•œë‹¤.
- `@DiscriminatorColumn(name='DTYPE')` 
: ë¶€ëª¨ í´ë˜ìŠ¤ì— êµ¬ë¶„ ì»¬ëŸ¼ì„ ì§€ì •í•œë‹¤. ê¸°ë³¸ê°’ì´ DTYPEì´ë¼ @DiscriminatorColumnë§Œ ì¨ë„ ëœë‹¤.

ìì‹ í…Œì´ë¸” ì½”ë“œë¥¼ ë³´ì.

```java
@Entity
@DisciminatorValue("A")
public class Album extends Item{
	private String artist;
    ...
}
```
- `@DiscriminatorValue('M')` 
: ì—”í‹°í‹°ë¥¼ ì €ì¥í•  ë•Œ êµ¬ë¶„ ì»¬ëŸ¼ì— ì…ë ¥í•  ê°’ì„ ì§€ì •í•œë‹¤.

ë§Œì•½ ìì‹ í…Œì´ë¸”ì—ì„œ ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª…ì„ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´? `@PrimaryKeyJoinColumn`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```java
@Entity
@DisciminatorValue("A")
@PrimaryKeyJoinColumn(name="ALBUM_ID") //ID ì¬ì •ì˜
public class Album extends Item{
	private String artist;
    ...
}
```

#### ì¡°ì¸ ì „ëµì˜ ì¥ì 
- í…Œì´ë¸”ì´ ì •ê·œí™”ëœë‹¤.
- ì™¸ë˜í‚¤ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.
- ì €ì¥ê³µê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
#### ì¡°ì¸ ì „ëµì˜ ë‹¨ì 
- ì¡°íšŒí•  ë•Œ ì¡°ì¸ì´ ë§ì´ ì‚¬ìš©ë˜ë¯€ë¡œ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆë‹¤.
- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë³µì¡í•˜ë‹¤.
- ë°ì´í„° ë“±ë¡ì‹œ INSERT ê°€ ë‘ë²ˆ ì‹¤í–‰í•œë‹¤.

#### íŠ¹ì§•
JPA í‘œì¤€ ëª…ì„¸ëŠ” êµ¬ë¶„ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì§€ë§Œ, í•˜ì´ë²„ë„¤ì´íŠ¸ë¥¼ í¬í•¨í•œ ëª‡ëª‡ êµ¬í˜„ì²´ëŠ” êµ¬ë¶„ì»¬ëŸ¼ ì—†ì´ë„ ë™ì‘í•œë‹¤.

#### ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜
`@PrimaryKeyJoinColumn`, `@DiscriminatorColumn`, `@DisciminatorValue`


### ğŸ“Œë‹¨ì¼ í…Œì´ë¸” ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/8cabb64c-b575-4a02-a57b-cb4b8fa8cf14/image.png)

ë‹¨ì¼í…Œì´ë¸” ì „ëµì€ í…Œì´ë¸”ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•œë‹¤. ê·¸ë¦¬ê³  êµ¬ë¶„ ì»¬ëŸ¼ìœ¼ë¡œ ì–´ë–¤ ìì‹ ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ìˆëŠ”ì§€ êµ¬ë¶„í•œë‹¤.
ì¡°íšŒí•  ë•Œ ì¡°ì¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë¹ ë¥´ë‹¤.

ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item{
	@Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}

@Entity
@DisciminatorValue("A")
public class Album extends Item{
    ...
}
```
`@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¨ì¼ í…Œì´ë¸” ì „ëµì„ ì‚¬ìš©í•œë‹¤.

#### ë‹¨ì¼ í…Œì´ë¸” ì „ëµ ì¥ì 
- ì¡°ì¸ì´ í•„ìš”ì—†ìœ¼ë¯€ë¡œ ì¡°íšŒ ì„±ëŠ¥ì´ ë¹ ë¥´ë‹¤.
- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë‹¨ìˆœí•˜ë‹¤.
#### ë‹¨ì¼ í…Œì´ë¸” ì „ëµ ë‹¨ì 
- ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ nullì„ í—ˆìš©í•´ì•¼í•œë‹¤.
- ë‹¨ì¼ í…Œì´ë¸”ì— ëª¨ë“ ê²ƒì´ ì €ì¥ë˜ë¯€ë¡œ ìƒí™©ì— ë”°ë¼ì„œ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ì•ˆì¢‹ì„ ìˆ˜ ìˆë‹¤.
#### íŠ¹ì§•
- êµ¬ë¶„ ì»¬ëŸ¼ì„ ê¼­ ì‚¬ìš©í•´ì•¼í•œë‹¤.(`@DiscriminatorColumn`)
- `@DisciminatorValue`ë¥¼ ìƒëµí•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ ì—”í‹°í‹° ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.


### ğŸ“Œêµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ
![](https://velog.velcdn.com/images/baeyuyeon/post/5d94ddca-0f8e-4a43-b8e4-9d7bf67b9e9d/image.png)
ìì‹ ì—”í‹°í‹° ë§ˆë‹¤ í…Œì´ë¸”ì„ ë§Œë“ ë‹¤.

ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Item{
	@Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;
    
    private String name;
    private int price;
    ...
}

@Entity
public class Album extends Item{
    ...
}
```
`@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)`ë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµì„ ì‚¬ìš©í•œë‹¤.** ì¼ë°˜ì ìœ¼ë¡œ ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ì „ëµì´ë‹¤.**

#### êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ì¥ì 
- ì„œë¸Œ íƒ€ì…ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬í•  ë•Œ íš¨ê³¼ì 
- NOT NULL ì œì•½ì¡°ê±´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ë‹¨ì 
- ì—¬ëŸ¬ ìì‹ í…Œì´ë¸”ì„ í•¨ê²Œ ì¡°íšŒí•  ë•Œ ì„±ëŠ¥ì´ ëŠë¦¬ë‹¤.(UNION ì‚¬ìš©)
#### íŠ¹ì§•
- êµ¬ë¶„ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
- í•´ë‹¹ ì „ëµì€ ì¶”ì²œí•˜ì§€ ì•Šê³  ì¡°ì¸ì´ë‚˜ ë‹¨ì¼ í…Œì´ë¸” ì „ëµì„ ê³ ë ¤í•˜ì.

---
## 2. @MappedSurperclass
ë¶€ëª¨ í´ë˜ìŠ¤ëŠ” í…Œì´ë¸”ê³¼ ë§¤í•‘í•˜ì§€ ì•Šê³  ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ìì‹ í´ë˜ìŠ¤ì—ê²Œ ë§¤í•‘ ì •ë³´ë§Œ ì œê³µí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
@MappedSurperClass ëŠ” ì‹¤ì œ í…Œì´ë¸”ê³¼ëŠ” ë§¤í•‘ë˜ì§€ ì•ŠëŠ”ë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/1ab8cdec-19ed-4a5d-8766-9e038e1caf83/image.png)
íšŒì›ê³¼ íŒë§¤ìëŠ” ì„œë¡œ ê´€ê³„ê°€ ì—†ëŠ” í…Œì´ë¸”ì´ë‹¤. id, name ë‘ ê³µí†µ ì†ì„±ë§Œ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ëª¨ì•„ì¤€ BaseEntity ë¥¼ ìƒì„±í•˜ì˜€ë‹¤.
ì½”ë“œë¥¼ ë³´ì.
```java
@MappedSuperclass
public class BaseEntity {

	@Id
    @GeneratedValue
    private Long id;
    private String name;
    ...
}
@Entity
public class Member7_2 extends BaseEntity {
	private String email;
}
...
```
`@MappedSuperClass` ë¥¼ ì‚¬ìš©í•´ì„œ í…Œì´ë¸”ê³¼ ë§¤í•‘í•  í•„ìš”ê°€ ì—†ê³  ìì‹ ì—”í‹°í‹°ì—ê²Œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë§¤í•‘ ì •ë³´ë§Œ ì œê³µí•˜ì˜€ë‹¤.

#### @MappedSuperclass íŠ¹ì§•
- @MappedSupeerclass ë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¯€ë¡œ em.find()ë‚˜ JPQLì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- ì´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë§Œë“œëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
- ë“±ë¡ì¼ì, ìˆ˜ì •ì¼ì, ë“±ë¡ì, ìˆ˜ì •ì ê°™ì€ ì—¬ëŸ¬ ì—”í‹°í‹°ì—ì„œ ê³µí†µ ì‚¬ìš©í•˜ëŠ” ì†ì„±ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
>ì°¸ê³ 
@Entity ëŠ” @Entity ì´ê±°ë‚˜ @MappedSuperclassë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ë°›ì„ ìˆ˜ ìˆë‹¤.

---
## 3. ë³µí•©í‚¤ì™€ ì‹ë³„ê´€ê³„ ë§¤í•‘
#### ì‹ë³„ê´€ê³„
ì‹ë³„ê´€ê³„ëŠ” ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ë‚´ë ¤ë°›ì•„ì„œ ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ + ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê´€ê³„ë‹¤.
#### ë¹„ì‹ë³„ê´€ê³„
ë¹„ì‹ë³„ê´€ê³„ëŠ” ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ì„œ ìì‹ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¡œë§Œ ì‚¬ìš©í•˜ëŠ” ê´€ê³„ë‹¤. ìµœê·¼ì—ëŠ” ë¹„ì‹ë³„ê´€ê³„ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

- í•„ìˆ˜ì  ë¹„ì‹ë³„ê´€ê³„ : ì™¸ë˜í‚¤ì— NULLì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì—°ê´€ê´€ê³„ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ë§ºì–´ì•¼í•œë‹¤.
- ì„ íƒì  ë¹„ì‹ë³„ê´€ê³„ : ì™¸ë˜í‚¤ì— NULLì„ í—ˆìš©í•œë‹¤.

### ğŸ”ë³µí•©í‚¤ : ë¹„ì‹ë³„ ê´€ê³„ ë§¤í•‘
JPAì—ì„œ ì‹ë³„ìë¥¼ ë‘˜ ì´ìƒ ì‚¬ìš©í•˜ë ¤ë©´ ë³„ë„ì˜ ì‹ë³„ì í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤. 
JPAëŠ” ë³µí•©í‚¤ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ @IdClassì™€ @EmbeddedId 2ê°€ì§€ ë°©ë²•ì„ ì œê³µí•˜ëŠ”ë°, @IdClassëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ê°€ê¹Œìš´ ë°©ë²•ì´ê³ , @EmbeddedIdëŠ” ì¢€ ë” ê°ì²´ì§€í–¥ì— ê°€ê¹Œìš´ ë°©ë²•ì´ë‹¤.

#### ğŸ”@IdClass
![](https://velog.velcdn.com/images/baeyuyeon/post/97647126-94d3-4d62-920c-c72890e6e729/image.png)
PARENT í…Œì´ë¸”ì„ ë³´ë©´ ê¸°ë³¸í‚¤ë¥¼ PARENT_ID1, PARENT_ID2 ë¡œ ë¬¶ì€ ë³µí•©í‚¤ë¡œ êµ¬ì„±í–ˆë‹¤. 
```java
@Entity
@IdClass(ParentId.class)
public class Parent{
	@Id
    @Column(name = "PARENT_ID1")
    private String id; // ParentId.id1ê³¼ ì—°ê²°
    
    @Id
    @Column(name = "PARENT_ID2")
    private String id2; // ParentId.id2ì™€ ì—°ê²°
    
    private String name;
    ...
}


public class ParentId implements Serializable {

    private String id;
    private String id2;

    public ParentId() {
    }

    public ParentId(String id, String id2) {
        this.id = id;
        this.id2 = id2;
    }
    //equals, hashCode ì˜¤ë²„ë¼ì´ë“œ
    ...
}
```
**`@IdClass` ë¥¼ ì´ìš©í•œ ì‹ë³„ì í´ë˜ìŠ¤ ì¡°ê±´ **
- ì‹ë³„ì í´ë˜ìŠ¤ì˜ ì†ì„±ëª…ê³¼ ì—”í‹°í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” **ì‹ë³„ìì˜ ì†ì„±ëª…ì´ ê°™ì•„ì•¼í•œë‹¤.**
- Serializable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤
- equals, hashCode ë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤.
- ê¸°ë³¸ ìƒì„±ìê°€ ìˆì–´ì•¼í•œë‹¤.
- ì‹ë³„ì í´ë˜ìŠ¤ëŠ” public ì´ì–´ì•¼í•œë‹¤.

ê·¸ëŸ¬ë©´ ì‹¤ì œ ì €ì¥ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë³´ì.
```java
Parent parent = new Parent();
parent.setId("myId1"); //ì‹ë³„ì
parent.setId("myId2"); //ì‹ë³„ì
parent.setName("parentName");
em.persist(parent);
```
ì €ì¥ ì½”ë“œë¥¼ ë³´ë©´, ParentIdê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. `em.persist()` ë¥¼ í˜¸ì¶œí•˜ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì—”í‹°í‹°ë¥¼ ë“±ë¡í•˜ê¸° ì§ì „ì— ë‚´ë¶€ì—ì„œ `Parent.id1`, `Parent.id2`ë¥¼ ì‚¬ìš©í•´ì„œ `ParentId`ë¥¼ ìƒì„±í•˜ê³  **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ í‚¤ë¡œ ì‚¬ìš©**í•œë‹¤.

ì¡°íšŒ ì½”ë“œë¥¼ ë³´ì.
```java
ParentId parentId = new ParentId("myId1", "myId2");
Parent parent = em.find(Parent.class, parentId);
```
ì‹ë³„ì í´ë˜ìŠ¤ì¸ ParentIdë¥¼ í†µí•´ì„œ ì¡°íšŒë¥¼ í•œë‹¤.

ì´ì œ ìì‹ í´ë˜ìŠ¤ ì½”ë“œë¥¼ ë³´ì.
```java
@Entity
public class Child{
	@Id
    private Stirng id;
    
    @ManyToOne
    @JoinColumns({
    	@JoinColumn(name="PARENT_ID1", referecedColumnName = "PARENT_ID1"),
        @JoinColumn(name="PARENT_ID2", referecedColumnName = "PARENT_ID2")
    })
    private Parent parent;
}
```
ì™¸ë˜í‚¤ ë§¤í•‘ì‹œ ì—¬ëŸ¬ ì»¬ëŸ¼ì„ ë§¤í•‘í•´ì•¼í•˜ë¯€ë¡œ `@JoinColumns` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œë‹¤.
ì°¸ê³ ë¡œ, @JoinColumn ì˜ nameê³¼ referencedColumnName ì†ì„±ì˜ ê°’ì´ ê°™ìœ¼ë©´ referencedColumnNameì€ ìƒëµí•´ë„ ëœë‹¤. 

#### ğŸ”@EmbeddedId
@EmbeddedID ëŠ” ì¢€ ë” ê°ì²´ì§€í–¥ì ì¸ ë°©ë²•ì´ë‹¤.
```java
@Entity
public class Parent{
	@EmbeddedId
    private ParentId id;
    
    private String name;
    ...
}
```

Parent ì—”í‹°í‹°ì—ì„œ ì‹ë³„ì í´ë˜ìŠ¤(ParentId)ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³  `@EmbeddedId` ì–´ë…¸í…Œì´ì…˜ì„ ì ì–´ì£¼ë©´ ëœë‹¤.

```java
@Embeddable
public class ParentId implements Serializable{
	@Column(name="PARENT_ID1")
    private String id;
    
    @Column(name="PARENT_ID2")
    private String id2;
    
    //equals and hashCode êµ¬í˜„
	...
}
```

@IdClassì™€ëŠ” ë‹¤ë¥´ê²Œ @EmbeddedIdë¥¼ ì ìš©í•œ ì‹ë³„ì í´ë˜ìŠ¤ëŠ” ì‹ë³„ì í´ë˜ìŠ¤ì— ê¸°ë³¸í‚¤ë¥¼ ì§ì ‘ ë§¤í•‘í•œë‹¤.

**@EmbeddedIdë¥¼ ì ìš©í•œ ì‹ë³„ì í´ë˜ìŠ¤ ì¡°ê±´**
- Serializable ì„ êµ¬í˜„í•´ì•¼í•œë‹¤.
- equals, hashCode ë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤.
- ê¸°ë³¸ ìƒì„±ìê°€ ìˆì–´ì•¼í•œë‹¤.
- ì‹ë³„ì í´ë˜ìŠ¤ëŠ” public ì´ì–´ì•¼í•œë‹¤.

**@EmbeddedIdë¥¼ ì‚¬ìš©í•œ ì €ì¥ ì½”ë“œ**
```java
Parent parent  =new Parent();
ParentId parentId = new ParentId("myId1", "myId2");
parent.setId(parentId);
parent.setName("ì•„ë¬´ê°œ");
em.persist();
```
ì‹ë³„ì í´ë˜ìŠ¤ parentIdë¥¼ ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•œë‹¤.
**@EmbeddedIdë¥¼ ì‚¬ìš©í•œ ì¡°íšŒ ì½”ë“œ**
```java
ParentId  parentId = new ParentId("myId1", "myId2");
Parent parent = em.find(Parent.class, parentId);
```
ì¡°íšŒ ì½”ë“œë„ ì‹ë³„ì í´ë˜ìŠ¤  parentIdë¥¼ ì§ì ‘ ì‚¬ìš©í•œë‹¤.

#### ë³µí•©í‚¤ì™€ equals(), hashCode()
ë³µí•©í‚¤ëŠ” equals()ì™€ hashCode()ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ êµ¬í˜„í•´ì•¼í•œë‹¤.
ì™œëƒí•˜ë©´, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ì—”í‹°í‹°ì˜ ì‹ë³„ìë¥¼ í‚¤ë¡œ ì‚¬ìš©í•´ì„œ ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ê³ , ì‹ë³„ìë¥¼ ë¹„êµí•  ë•Œ equals()ì™€ hashCode()ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

#### @IdClass VS @EmbeddedId
@EmbeddedID ê°€ @IdClassì™€ ë¹„êµí•´ì„œ ì¢€ ë” ê°ì²´ì§€í–¥ì ì¼ ìˆ˜ ìˆê³ , ì¤‘ë³µë„ ì—†ì–´ì„œ ì¢‹ì•„ë³´ì´ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ì„œ JPQLì´ ë” ê¸¸ì–´ì¤„ ìˆ˜ ìˆë‹¤.
```sql
em.createQuery("select p.id.id1, p.id.id2 from Parent p"); //@Embedded
em.createQuery("select p.id, p.id2 from Parent p"); //@IdClass
```

### ğŸ”ë³µí•©í‚¤ : ì‹ë³„ ê´€ê³„ ë§¤í•‘
![](https://velog.velcdn.com/images/baeyuyeon/post/d7ecc9fc-81f1-43dd-8759-0dbb44302e31/image.png)
ì‹ë³„ê´€ê³„ì—ì„œ ìì‹ í…Œì´ë¸”ì€ ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ í¬í•¨í•´ì„œ ë³µí•©í‚¤ë¥¼ êµ¬ì„±í•´ì•¼í•œë‹¤.
#### ğŸ”@IdClassì™€ ì‹ë³„ê´€ê³„
ì½”ë“œë¥¼ ë³´ì.
```java
//ë¶€ëª¨
@Entity
public class Parent {

    @Id
    @Column(name = "PARENT_ID")
    private String id;
    private String name;
	...
}
//ìì‹

@Entity
@IdClass(ChildId.class)
public class Child {

    @Id
    @ManyToOne
    @JoinColumn(name="PARENT_ID")
    public Parent parent;
    
    @Id @Column(name="CHILD_ID")
    private String childId;

    private String name;
    ...

}
// ìì‹ IDí´ë˜ìŠ¤
public class ChildId implements Serializable{
	private String parent; // Child.parent ë§¤í•‘
    private String childId;// Child.childId ë§¤í•‘
    
    //equals, hashCode
    ...
}
```
ì‹ë³„ê´€ê³„ëŠ” ê¸°ë³¸í‚¤ì™€ ì™¸ë˜í‚¤ë¥¼ ê°™ì´ ë§¤í•‘í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ì‹ë³„ì ë§¤í•‘ì¸ @Idì™€ ì—°ê´€ê´€ê³„ ë§¤í•‘ì¸ @ManyToOne ì„ ê°™ì´ ì‚¬ìš©í•˜ì˜€ë‹¤.

#### ğŸ”@EmbeddedId ì™€ ì‹ë³„ê´€ê³„
ì½”ë“œë¥¼ ë³´ì.
```java
//ë¶€ëª¨
@Entity
public class Parent {

    @Id
    @Column(name = "PARENT_ID")
    private String id;
    private String name;
    ...
}

//ìì‹
@Entity
public class Child {

    @EmbeddedId
    private ChildId id;

    @MapsId("parentId") // ChildId.parentIdì™€ ë§¤í•‘
    @ManyToOne
    @JoinColumn(name = "PARENT_ID")
    public Parent2 parent;

    private String name;
	...
}
//ìì‹ ID
@Embeddable
public class ChildId implements Serializable {

    private String parentId; // @MapsId("parentId")ë¡œ ë§¤í•‘

    @Column(name = "CHILD_ID")
    private String id;
    
    //equals, hashCode êµ¬í˜„
    ...
}
```
@IdClass ì™€ ë‹¤ë¥¸ì ì€ @Id ëŒ€ì‹ ì— `@MapsId`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. 
>**@MapsId** ëŠ” ì™¸ë˜í‚¤ì™€ ë§¤í•‘í•œ ì—°ê´€ê´€ê³„ë¥¼ ê¸°ë³¸í‚¤ì—ë„ ë§¤í•‘í•˜ê² ë‹¤ëŠ” ëœ»ì´ë‹¤.

### ğŸ”ë¹„ì‹ë³„ê´€ê³„ë¡œ êµ¬í˜„
6ì¥ì— ë‚˜ì™”ë˜ ì˜ˆì²˜ëŸ¼ ì‹ë³„ê´€ê³„ë¥¼ ë¹„ì‹ë³„ê´€ê³„ë¡œ ë³€ê²½í•˜ì.
![](https://velog.velcdn.com/images/baeyuyeon/post/588dedd9-ae9d-4aca-a64a-09275504cae1/image.png)
```java
//ë¶€ëª¨
@Entity
public class Parent {
	@Id @GeneratedValue
    @Column(name = "PARENT_ID")
    private Long id;
    
    private String name;
    ...
}
//ìì‹
@Entity
public class Child {
	@Id @GeneratedValue
    @Column(name = "CHILD_ID")
    private Long id;
    
    private String name;
    
	@ManyToOne
    @JoinColumn(name="PARENT_ID")
    private Parent parent;
    ...
}
```
ì—„ì²­ ê°„ë‹¨í•˜ë‹¤... ë§¤í•‘ë„ ì‰½ê³  ì½”ë“œë„ ë‹¨ìˆœí•˜ë‹¤. ë³µí•©í‚¤ í´ë˜ìŠ¤ë„ ë§Œë“¤ì§€ ì•Šì•„ë„ ëœë‹¤.

### ğŸ”ì¼ëŒ€ì¼ ì‹ë³„ê´€ê³„
![](https://velog.velcdn.com/images/baeyuyeon/post/b8549116-b381-4edd-b16b-c9dd1544e532/image.png)
ì¼ëŒ€ì¼ ì‹ë³„ê´€ê³„ëŠ” ìì‹í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ê°’ìœ¼ë¡œ ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ê°’ë§Œ ì‚¬ìš©í•œë‹¤.

```java
//ë¶€ëª¨
@Entity
public class Board {

    @Id
    @GeneratedValue
    @Column(name = "BOARD_ID")
    private Long id;

    private String title;

    @OneToOne(mappedBy = "board")
    private BoardDetail boardDetail;
    ...
}

//ìì‹
@Entity
public class BoardDetail {

    @Id
    private Long boardId;

    @MapsId //BoardDetail.boardId ì™€ ë§¤í•‘ë¨
    @OneToOne
    @JoinColumn(name = "BOARD_ID")
    private Board board;

    private String content;
    ...
}
```
BoardDetialì²˜ëŸ¼ ì‹ë³„ìê°€ ë‹¨ìˆœíˆ í•˜ë‚˜ë©´ `@MapsId` ë¥¼ ì‚¬ìš©í•˜ê³  ì†ì„± ê°’ì€ ë¹„ì›Œë‘ë©´ ëœë‹¤.
ì´ë•Œ @MapsIdëŠ” @Idë¥¼ ì‚¬ìš©í•´ì„œ ì‹ë³„ìë¡œ ì§€ì •í•œ BoardDetail.boardIdì™€ ë§¤í•‘ëœë‹¤.

---
## 4. ì¡°ì¸ í…Œì´ë¸”
ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ê³„í•˜ëŠ” ë°©ë²•ì€ ì¡°ì¸ì»¬ëŸ¼(ì™¸ë˜í‚¤)ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì¡°ì¸í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
#### âœ” ì¡°ì¸ ì»¬ëŸ¼ ì‚¬ìš©
í…Œì´ë¸” ê°„ì— ê´€ê³„ëŠ” ì£¼ë¡œ ì¡°ì¸ ì»¬ëŸ¼ì´ë¼ ë¶€ë¥´ëŠ” ì™¸ë˜í‚¤ ì»¬ëŸ¼ì„ ì‚¬ìš©í•´ ê´€ë¦¬í•œë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/26e175ed-ffd7-41cf-925d-a03574b42b0e/image.png)
íšŒì›ì´ ì•„ì§ ì‚¬ë¬¼í•¨ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ë‘˜ ì‚¬ì´ì˜ ê´€ê³„ê°€ ì—†ìœ¼ë¯€ë¡œ, MEMBERí…Œì´ë¸”ì˜ LOCKER_ID ì™¸ë˜í‚¤ì— NULLì„ í—ˆìš©í•˜ì—¬ì•¼í•œë‹¤.(ì„ íƒì  ë¹„ì‹ë³„ê´€ê³„)
ë”°ë¼ì„œ ë‘ í…Œì´ë¸”ì„ ì¡°íšŒí•  ë•Œ ì™¸ë¶€ ì¡°ì¸ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•œë‹¤.

#### âœ” ì¡°ì¸ í…Œì´ë¸” ì‚¬ìš©
![](https://velog.velcdn.com/images/baeyuyeon/post/24436ba9-4266-4b89-9ca9-bdd8bd39ac28/image.png)
íšŒì›ê³¼ ì‚¬ë¬¼í•¨ ë°ì´í„°ë¥¼ ê°ê° ë“±ë¡í–ˆë‹¤ê°€ íšŒì›ì´ ì›í•  ë•Œ ì‚¬ë¬¼í•¨ì„ ì„ íƒí•˜ë©´ MEMBER_LOCKER í…Œì´ë¸”ì—ë§Œ ê°’ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤.
ë‹¨ì ì€, í…Œì´ë¸”ì„ ì¶”ê°€ë¡œ ê´€ë¦¬í•´ì•¼í•˜ê³ , íšŒì›ê³¼ ì‚¬ë¬¼í•¨ ë‘ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ë ¤ë©´ MEMBER_LOCKER í…Œì´ë¸”ê¹Œì§€ ì¶”ê°€ë¡œ ì¡°ì¸í•´ì•¼í•œë‹¤.

#### íŠ¹ì§•
- ê°ì²´ì™€ í…Œì´ë¸”ì„ ë§¤í•‘í•  ë•Œ ì¡°ì¸ì»¬ëŸ¼ì€ @JoinColumn ìœ¼ë¡œ ë§¤í•‘í•˜ê³ , ì¡°ì¸í…Œì´ë¸”ì€ @JoinTableë¡œ ë§¤í•‘í•œë‹¤.
- ì¡°ì¸ í…Œì´ë¸”ì€ ì£¼ë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. 

### ğŸ“Œì¼ëŒ€ì¼ ì¡°ì¸ í…Œì´ë¸”

![](https://velog.velcdn.com/images/baeyuyeon/post/dcecd553-b7a1-4e30-bbd4-3ed639a64b30/image.png)

ì¼ëŒ€ì¼ ê´€ê³„ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì¡°ì¸ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ ì»¬ëŸ¼ê°ê°ì— 2ê°œì˜ ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì„ ê±¸ì–´ì•¼í•œë‹¤.

ì½”ë“œë¥¼ ë³´ì.
```java
//Parent
@Entity
public class Parent {

    @Id
    @GeneratedValue
    @Column(name = "PARENT_ID")
    private Long id;

    private String name;

    @OneToOne
    @JoinTable(name = "PARENT_CHILD",
            joinColumns = @JoinColumn(name = "PARENT_ID"),
            inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
    private Child child;
	...
}
//Child
@Entity
public class Child {

    @Id
    @GeneratedValue
    @Column(name = "CHILD_ID")
    private Long id;

    private String name;

}
```
ì¡°ì¸í…Œì´ë¸”ì„ ì´ìš©í•´ì„œ ë‹¨ë°©í–¥ ì¼ëŒ€ì¼ ë§¤í•‘ì„ í•˜ì˜€ë‹¤.
>**@JoinTableì˜ ì†ì„±**
name : ë§¤í•‘í•  ì¡°ì¸ í…Œì´ë¸” ì´ë¦„
joinColumns : í˜„ì¬ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜í‚¤
inverseJoinColumns: ë°˜ëŒ€ë°©í–¥ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜í‚¤

ì°¸ê³ ë¡œ ë‚˜ëŠ” ìœ„ì½”ë“œë¥¼ Mysql DBë¡œ ì„¤ì •í•´ì„œ ì‹¤í–‰í–ˆë”ë‹ˆ, child_id ì— ëŒ€í•´ì„œ ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì´ ìƒì„±ë˜ì§€ ì•Šê³ , MULíƒ€ì…ìœ¼ë¡œ ìƒì„±ë˜ì—ˆë‹¤.
> MULíƒ€ì…ì´ë€?
MULTIPLE ì˜ ì¤„ì¸ ë§ë¡œ, ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜í‚¤ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. í•´ë‹¹ ê°’ì€ ì¸ë±ìŠ¤ë¡œ ë“±ë¡ë˜ê³  ì—¬ëŸ¬í–‰ì´ ë™ì¼í•œ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

### ğŸ“Œì¼ëŒ€ë‹¤ ì¡°ì¸ í…Œì´ë¸”
![](https://velog.velcdn.com/images/baeyuyeon/post/f39b8bc9-aebf-4119-b28e-aad069533c49/image.png)
ì¼ëŒ€ë‹¤ì¤‘ ë‹¤ì— í•´ë‹¹í•˜ëŠ” CHILDì»¬ëŸ¼ì— ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì´ ê±¸ë ¤ì•¼í•œë‹¤.(ê¸°ë³¸í‚¤ì—¬ì„œ ìœ ë‹ˆí¬ì œì•½ì¡°ê±´ì´ ê±¸ë ¤ìˆìŒ)

```java
//Parent
@Entity
public class Parent {

    @Id
    @GeneratedValue
    @Column(name = "PARENT_ID")
    private Long id;

    private String name;

    @OneToMany
    @JoinTable(name = "PARENT_CHILD",
            joinColumns = @JoinColumn(name = "PARENT_ID"),
            inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
    private List<Child> child = new ArrayList<Child>();
	...
}
//Child
@Entity
public class Child {

    @Id
    @GeneratedValue
    @Column(name = "CHILD_ID")
    private Long id;

    private String name;

}
```
ì¡°ì¸í…Œì´ë¸”ì„ ì´ìš©í•´ì„œ ë‹¨ë°©í–¥ ì¼ëŒ€ë‹¤ ë§¤í•‘ì„ í•˜ì˜€ë‹¤.

### ğŸ“Œë‹¤ëŒ€ë‹¤ ì¡°ì¸ í…Œì´ë¸”
![](https://velog.velcdn.com/images/baeyuyeon/post/0d353a71-6222-4c9b-8d48-dedbf0dde240/image.png)
ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§Œë“¤ë ¤ë©´ ì¡°ì¸ í…Œì´ë¸”ì˜ ë‘ ì»¬ëŸ¼ì„ í•©í•´ì„œ í•˜ë‚˜ì˜ ë³µí•© ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì„ ê±¸ì–´ì•¼í•œë‹¤.
```java
//Parent
@Entity
public class Parent {

    @Id
    @GeneratedValue
    @Column(name = "PARENT_ID")
    private Long id;

    private String name;

    @ManyToMany
    @JoinTable(name = "PARENT_CHILD",
            joinColumns = @JoinColumn(name = "PARENT_ID"),
            inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
    private List<Child> child = new ArrayList<Child>();
	...
}
//Child
@Entity
public class Child {

    @Id
    @GeneratedValue
    @Column(name = "CHILD_ID")
    private Long id;

    private String name;
	...
}
```

---
## 5. ì—”í‹°í‹° í•˜ë‚˜ì— ì—¬ëŸ¬ í…Œì´ë¸” ë§¤í•‘
ì˜ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì§€ë§Œ `@SecondaryTable`ì„ ì‚¬ìš©í•˜ë©´ í•œ ì—”í‹°í‹°ì— ì—¬ëŸ¬í…Œì´ë¸”ì„ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.
![](https://velog.velcdn.com/images/baeyuyeon/post/5b0133e7-e931-4ec8-8c35-e6c635969cd6/image.png)
ì½”ë“œë¥¼ ë³´ì.
```java
//Parent
@Entity
@Table(name="BOARD")
@SecondaryTable(name = "BOARD_DETAIL", pkJoinColumns = @PrimaryKeyJoinColumn(name="BOARD_DETAIL_ID"))
public class Board {

    @Id
    @GeneratedValue
    @Column(name = "BOARD_ID")
    private Long id;

    private String title;

    @Column(table = "BAORD_DETAIL")
    private String content;
	...
}
```
`@SecondaryTable`ì„ ì‚¬ìš©í•´ì„œ BOARD_DETAIL í…Œì´ë¸”ì„ ì¶”ê°€ë¡œ ë§¤í•‘í–ˆë‹¤.

**@SecondaryTable ì†ì„±** 
- @SecondaryTable.name : ë§¤í•‘í•  ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ì´ë¦„
- @SecondaryTable.pkJoinColumns : ë§¤í•‘í•  ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ì†ì„±ì§€ì •
